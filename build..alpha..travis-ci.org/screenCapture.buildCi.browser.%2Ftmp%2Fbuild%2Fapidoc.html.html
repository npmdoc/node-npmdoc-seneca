<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="http://senecajs.org">seneca (v3.3.0)</a>
</h1>
<h4>A Microservices Framework for Node.js</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca">module seneca</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.seneca">
            function <span class="apidocSignatureSpan"></span>seneca
            <span class="apidocSignatureSpan">(seneca_options, more_options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.Seneca">
            function <span class="apidocSignatureSpan">seneca.</span>Seneca
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.logging">
            function <span class="apidocSignatureSpan">seneca.</span>logging
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.optioner">
            function <span class="apidocSignatureSpan">seneca.</span>optioner
            <span class="apidocSignatureSpan">(callmodule, defaults, orig_initial)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.print">
            function <span class="apidocSignatureSpan">seneca.</span>print
            <span class="apidocSignatureSpan">(seneca)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.test">
            function <span class="apidocSignatureSpan">seneca.</span>test
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.toString">
            function <span class="apidocSignatureSpan">seneca.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.use">
            function <span class="apidocSignatureSpan">seneca.</span>use
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.argprops">
            function <span class="apidocSignatureSpan">seneca.</span>util.argprops
            <span class="apidocSignatureSpan">(defaults, args, fixed, omits)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.clean">
            function <span class="apidocSignatureSpan">seneca.</span>util.clean
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.copydata">
            function <span class="apidocSignatureSpan">seneca.</span>util.copydata
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.deepextend">
            function <span class="apidocSignatureSpan">seneca.</span>util.deepextend
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.nil">
            function <span class="apidocSignatureSpan">seneca.</span>util.nil
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.parsepattern">
            function <span class="apidocSignatureSpan">seneca.</span>util.parsepattern
            <span class="apidocSignatureSpan">(instance, args, normaspec, fixed)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.pattern">
            function <span class="apidocSignatureSpan">seneca.</span>util.pattern
            <span class="apidocSignatureSpan">(patobj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.pincanon">
            function <span class="apidocSignatureSpan">seneca.</span>util.pincanon
            <span class="apidocSignatureSpan">(inpin)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.print">
            function <span class="apidocSignatureSpan">seneca.</span>util.print
            <span class="apidocSignatureSpan">(err, out)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.recurse">
            function <span class="apidocSignatureSpan">seneca.</span>util.recurse
            <span class="apidocSignatureSpan">(list, work, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.router">
            function <span class="apidocSignatureSpan">seneca.</span>util.router
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">seneca.</span>actions</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">seneca.</span>common</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">seneca.</span>legacy</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">seneca.</span>plugins</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">seneca.</span>transport</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">seneca.</span>util</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.Seneca">module seneca.Seneca</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.Seneca.Seneca">
            function <span class="apidocSignatureSpan">seneca.</span>Seneca
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.Seneca.super_">
            function <span class="apidocSignatureSpan">seneca.Seneca.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.actions">module seneca.actions</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.actions.find">
            function <span class="apidocSignatureSpan">seneca.actions.</span>find
            <span class="apidocSignatureSpan">(pattern, flags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.actions.has">
            function <span class="apidocSignatureSpan">seneca.actions.</span>has
            <span class="apidocSignatureSpan">(pattern)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.actions.list">
            function <span class="apidocSignatureSpan">seneca.actions.</span>list
            <span class="apidocSignatureSpan">(pattern)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">seneca.actions.</span>inward</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">seneca.actions.</span>outward</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.common">module seneca.common</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.argprops">
            function <span class="apidocSignatureSpan">seneca.common.</span>argprops
            <span class="apidocSignatureSpan">(defaults, args, fixed, omits)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.boolify">
            function <span class="apidocSignatureSpan">seneca.common.</span>boolify
            <span class="apidocSignatureSpan">(v)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.clean">
            function <span class="apidocSignatureSpan">seneca.common.</span>clean
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.console_error">
            function <span class="apidocSignatureSpan">seneca.common.</span>console_error
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.copydata">
            function <span class="apidocSignatureSpan">seneca.common.</span>copydata
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.deepextend">
            function <span class="apidocSignatureSpan">seneca.common.</span>deepextend
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.delegate">
            function <span class="apidocSignatureSpan">seneca.common.</span>delegate
            <span class="apidocSignatureSpan">(scope, func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.make_standard_act_log_entry">
            function <span class="apidocSignatureSpan">seneca.common.</span>make_standard_act_log_entry
            <span class="apidocSignatureSpan">(actmeta, msg, origmsg, ctxt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.make_standard_err_log_entry">
            function <span class="apidocSignatureSpan">seneca.common.</span>make_standard_err_log_entry
            <span class="apidocSignatureSpan">(err, ctxt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.makedie">
            function <span class="apidocSignatureSpan">seneca.common.</span>makedie
            <span class="apidocSignatureSpan">(instance, ctxt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.nil">
            function <span class="apidocSignatureSpan">seneca.common.</span>nil
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.parsePattern">
            function <span class="apidocSignatureSpan">seneca.common.</span>parsePattern
            <span class="apidocSignatureSpan">(instance, args, normaspec, fixed)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.pattern">
            function <span class="apidocSignatureSpan">seneca.common.</span>pattern
            <span class="apidocSignatureSpan">(patobj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.pincanon">
            function <span class="apidocSignatureSpan">seneca.common.</span>pincanon
            <span class="apidocSignatureSpan">(inpin)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.print">
            function <span class="apidocSignatureSpan">seneca.common.</span>print
            <span class="apidocSignatureSpan">(err, out)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.recurse">
            function <span class="apidocSignatureSpan">seneca.common.</span>recurse
            <span class="apidocSignatureSpan">(list, work, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.common.tagnid">
            function <span class="apidocSignatureSpan">seneca.common.</span>tagnid
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.legacy">module seneca.legacy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.legacy.fail">
            function <span class="apidocSignatureSpan">seneca.legacy.</span>fail
            <span class="apidocSignatureSpan">(so)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.logging">module seneca.logging</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.logging.logging">
            function <span class="apidocSignatureSpan">seneca.</span>logging
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.logging.preload">
            function <span class="apidocSignatureSpan">seneca.logging.</span>preload
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.optioner">module seneca.optioner</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.optioner.optioner">
            function <span class="apidocSignatureSpan">seneca.</span>optioner
            <span class="apidocSignatureSpan">(callmodule, defaults, orig_initial)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.plugins">module seneca.plugins</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.plugins.make_delegate">
            function <span class="apidocSignatureSpan">seneca.plugins.</span>make_delegate
            <span class="apidocSignatureSpan">(instance, plugin)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.plugins.register">
            function <span class="apidocSignatureSpan">seneca.plugins.</span>register
            <span class="apidocSignatureSpan">(so, callpoint)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">seneca.plugins.</span>api_decorations</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.print">module seneca.print</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.print.print">
            function <span class="apidocSignatureSpan">seneca.</span>print
            <span class="apidocSignatureSpan">(seneca)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.print.print_options">
            function <span class="apidocSignatureSpan">seneca.print.</span>print_options
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.test">module seneca.test</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.test.test">
            function <span class="apidocSignatureSpan">seneca.</span>test
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.toString">module seneca.toString</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.toString.toString">
            function <span class="apidocSignatureSpan">seneca.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.transport">module seneca.transport</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.transport.client">
            function <span class="apidocSignatureSpan">seneca.transport.</span>client
            <span class="apidocSignatureSpan">(callpoint)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.transport.listen">
            function <span class="apidocSignatureSpan">seneca.transport.</span>listen
            <span class="apidocSignatureSpan">(callpoint)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.use">module seneca.use</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.use.use">
            function <span class="apidocSignatureSpan">seneca.</span>use
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.util">module seneca.util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.argprops">
            function <span class="apidocSignatureSpan">seneca.util.</span>argprops
            <span class="apidocSignatureSpan">(defaults, args, fixed, omits)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.clean">
            function <span class="apidocSignatureSpan">seneca.util.</span>clean
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.copydata">
            function <span class="apidocSignatureSpan">seneca.util.</span>copydata
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.deepextend">
            function <span class="apidocSignatureSpan">seneca.util.</span>deepextend
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.nil">
            function <span class="apidocSignatureSpan">seneca.util.</span>nil
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.parsepattern">
            function <span class="apidocSignatureSpan">seneca.util.</span>parsepattern
            <span class="apidocSignatureSpan">(instance, args, normaspec, fixed)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.pattern">
            function <span class="apidocSignatureSpan">seneca.util.</span>pattern
            <span class="apidocSignatureSpan">(patobj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.pincanon">
            function <span class="apidocSignatureSpan">seneca.util.</span>pincanon
            <span class="apidocSignatureSpan">(inpin)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.print">
            function <span class="apidocSignatureSpan">seneca.util.</span>print
            <span class="apidocSignatureSpan">(err, out)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.recurse">
            function <span class="apidocSignatureSpan">seneca.util.</span>recurse
            <span class="apidocSignatureSpan">(list, work, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.router">
            function <span class="apidocSignatureSpan">seneca.util.</span>router
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.util.argprops">module seneca.util.argprops</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.argprops.argprops">
            function <span class="apidocSignatureSpan">seneca.util.</span>argprops
            <span class="apidocSignatureSpan">(defaults, args, fixed, omits)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.util.clean">module seneca.util.clean</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.clean.clean">
            function <span class="apidocSignatureSpan">seneca.util.</span>clean
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.util.copydata">module seneca.util.copydata</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.copydata.copydata">
            function <span class="apidocSignatureSpan">seneca.util.</span>copydata
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.util.deepextend">module seneca.util.deepextend</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.deepextend.deepextend">
            function <span class="apidocSignatureSpan">seneca.util.</span>deepextend
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.util.nil">module seneca.util.nil</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.nil.nil">
            function <span class="apidocSignatureSpan">seneca.util.</span>nil
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.util.parsepattern">module seneca.util.parsepattern</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.parsepattern.parsepattern">
            function <span class="apidocSignatureSpan">seneca.util.</span>parsepattern
            <span class="apidocSignatureSpan">(instance, args, normaspec, fixed)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.util.pattern">module seneca.util.pattern</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.pattern.pattern">
            function <span class="apidocSignatureSpan">seneca.util.</span>pattern
            <span class="apidocSignatureSpan">(patobj)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.util.pincanon">module seneca.util.pincanon</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.pincanon.pincanon">
            function <span class="apidocSignatureSpan">seneca.util.</span>pincanon
            <span class="apidocSignatureSpan">(inpin)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.util.print">module seneca.util.print</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.print.print">
            function <span class="apidocSignatureSpan">seneca.util.</span>print
            <span class="apidocSignatureSpan">(err, out)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.util.recurse">module seneca.util.recurse</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.recurse.recurse">
            function <span class="apidocSignatureSpan">seneca.util.</span>recurse
            <span class="apidocSignatureSpan">(list, work, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.seneca.util.router">module seneca.util.router</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.seneca.util.router.router">
            function <span class="apidocSignatureSpan">seneca.util.</span>router
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca" id="apidoc.module.seneca">module seneca</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.seneca" id="apidoc.element.seneca.seneca">
        function <span class="apidocSignatureSpan"></span>seneca
        <span class="apidocSignatureSpan">(seneca_options, more_options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function init(seneca_options, more_options) {
  var initial_options = _.isString(seneca_options)
        ? _.extend({}, {from: seneca_options}, more_options)
      : _.extend({}, seneca_options, more_options)

  var seneca = make_seneca(initial_options)
  var options = seneca.options()

  // The 'internal' key of options is reserved for objects and functions
  // that provide functionality, and are thus not really printable
  seneca.log.debug({kind: 'notice', options: _.omit(options, ['internal'])})

  Print.print_options(options)

  // TODO: these are core API and should not be decorations
  seneca.decorate('hasplugin', Plugins.api_decorations.hasplugin)
  seneca.decorate('findplugin', Plugins.api_decorations.findplugin)
  seneca.decorate('plugins', Plugins.api_decorations.plugins)

  // Register default plugins, unless turned off by options.
  if (options.default_plugins.transport) {
    seneca.use(require('seneca-transport'))
  }

  // Register plugins specified in options.
  _.each(options.plugins, function (plugindesc) {
    seneca.use(plugindesc)
  })

  seneca.ready(function () {
    this.log.info({kind: 'notice', notice: 'hello seneca ' + seneca.id})
  })

  return seneca
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.Seneca" id="apidoc.element.seneca.Seneca">
        function <span class="apidocSignatureSpan">seneca.</span>Seneca
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Seneca() {
  Events.EventEmitter.call(this)
  this.setMaxListeners(0)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.logging" id="apidoc.element.seneca.logging">
        function <span class="apidocSignatureSpan">seneca.</span>logging
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function logging(options) {
  // Everything is in preload as logging plugins are
  // a special case that need to be loaded before any calls to seneca.log.
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.optioner" id="apidoc.element.seneca.optioner">
        function <span class="apidocSignatureSpan">seneca.</span>optioner
        <span class="apidocSignatureSpan">(callmodule, defaults, orig_initial)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">optioner = function (callmodule, defaults, orig_initial) {

  var sourcemap = {
    argv: {},
    env: {},
    default_file: {},
    loaded: {}
  }

  // Must be defined here as prepare depends on it.
  var options = {}

  var basemodule = orig_initial.module || callmodule.parent || callmodule
  options = prepare(basemodule, defaults, orig_initial)

  // Not needed after this point, and screws up debug printing.
  delete options.module


  function prepare (basemodule, defaults, initial) {
    var DEFAULT_OPTIONS_FILE = './seneca.options.js'
    var FATAL_OPTIONS_FILE = './options.seneca.js'

    // Load from custom file, either by providing a string,
    // or having a property 'from' that is a string.
    // The string is interpreted as a file path.

    var from = initial.from
    if (_.isString(initial)) {
      from = initial
      initial = {}
    }

    if (_.isString(from)) {
      sourcemap.loaded = load_options(from)
    }


    var argv = Minimist(process.argv.slice(2))


    if (Fs.existsSync(FATAL_OPTIONS_FILE)) {
      throw error('inverted_file_name', {
        from: FATAL_OPTIONS_FILE, module: basemodule
      })
    }

    try {
      sourcemap.default_file = basemodule.require(DEFAULT_OPTIONS_FILE)
    }
    catch (e) {
      if (e.code !== 'MODULE_NOT_FOUND') {
        var wrappedError = {
          errmsg: e.message,
          from: DEFAULT_OPTIONS_FILE,
          module: basemodule
        }

        throw error(e, 'require_default_options', wrappedError)
      }
    }

    if (process.env.SENECA_OPTIONS) {
      sourcemap.env = Common.deepextend({}, sourcemap.env,
                                        Jsonic(process.env.SENECA_OPTIONS))
    }

    if (argv.seneca) {
      if (_.isObject(argv.seneca.options)) {
        sourcemap.argv = argv.seneca.options
      }
      else if (_.isString(argv.seneca.options)) {
        if (argv.seneca.options === 'print') {
          sourcemap.argv = { debug: {print: {options: true}} }
        }
        else {
          sourcemap.argv = Jsonic(argv.seneca.options)
        }
      }

      if (_.isString(sourcemap.argv.from)) {
        sourcemap.argv = Common.deepextend(load_options(sourcemap.argv.from),
                                           sourcemap.argv)
      }

      if (null != argv.seneca.tag) {
        sourcemap.argv.tag = '' + argv.seneca.tag
      }

      if (argv.seneca.log) {
        sourcemap.argv.log = sourcemap.argv.log || {}
        parse_command_line(argv.seneca.log, sourcemap.argv)
      }
    }

    // This is the list of option sources.
    // The list is in reverse precedence order,
    // i.e. command line arguments (argv) win
    var out = Common.deepextend(
      {},
      defaults,
      sourcemap.default_file,
      options,
      sourcemap.loaded,
      initial,
      sourcemap.env,
      sourcemap.argv
    )

    // Legacy log settings.
    out.log = out.log || out.logger || out.logging || {}

    // boolean corrections
    out.legacy.logging = Common.boolify(out.legacy.logging)

    return out
  }


  function parse_command_line (spec, parsedSpec) {
    var logSpec = _.isArray(spec) ? spec[0] : spec

    if (_.isString(logSpec)) {
      try {
        parsedSpec.log = Jsonic(logSpec)
      }
      catch (e) {
        parsedSpec.log = {}
      }
      return
    }

    if (_.isObject(logSpec)) {
      parsedSpec.log = {}
      var logType = Object.keys(logSpec.level || logSpec)
      if (logType.length &gt; 0) {
        parsedSpec.log = { level: logType[0] }
      }
    }
  }


  function set_options (input) {
    if (null == input) throw error('no_options')

    // DEPRECATED: Remove when Seneca &gt;= 4.x
    if (_.isString(input)) {
      options = prepare(basemodule, defaults, input)
    }
    else {
      options = Common.deepextend(options, input)
    }

    return options
  }


  function get_options () {
    return options
  }


  function load_options (from) {
    var out = {}


    if (from.match(/\.json$/i)) {
      // this is deliberate, options are ALWAYS loaded synchronously
      var text = Fs.readFileSync(from).toString()
      out = ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.print" id="apidoc.element.seneca.print">
        function <span class="apidocSignatureSpan">seneca.</span>print
        <span class="apidocSignatureSpan">(seneca)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">print = function (seneca) {
  var argv = Minimist(process.argv.slice(2))
  if (!argv || !argv.seneca) {
    return
  }
  var cmdspec = argv.seneca
  if (cmdspec.print) {
    if (cmdspec.print.tree) {
      // Hack! Complex init means non-deterministic or multiple ready calls,
      // so just delay tree print by some number of seconds to capture full tree.
      var delay_seconds = cmdspec.print.tree.all || cmdspec.print.tree
      if (_.isNumber(delay_seconds)) {
        setTimeout(function () {
          print_tree(seneca, cmdspec)
        }, 1000 * delay_seconds)
      }
      else {
        // Print after first ready
        seneca.ready(function () {
          print_tree(this, cmdspec)
        })
      }
    }

    if (cmdspec.print.options) {
      seneca.options({ debug: { print: { options: true } } })
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.test" id="apidoc.element.seneca.test">
        function <span class="apidocSignatureSpan">seneca.</span>test
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function top_test() {
  var argsarr = new Array(arguments.length)
  for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

  var instance = module.exports({test: true, log: 'test'})
  instance.test.apply(instance, argsarr)

  return instance
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

var instance = module.exports()

return instance.use.apply(instance, argsarr)
}

// Makes require('seneca').<span class="apidocCodeKeywordSpan">test</span>() work.
module.exports.test = function top_test () {
var argsarr = new Array(arguments.length)
for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

var instance = module.exports({test: true, log: 'test'})
instance.test.apply(instance, argsarr)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.toString" id="apidoc.element.seneca.toString">
        function <span class="apidocSignatureSpan">seneca.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
    return text;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    {},
    err.details,
    {
      message: (err.eraro &amp;&amp; err.orig) ? err.orig.message : err.message,
      pattern: actmeta.pattern,
      fn: actmeta.func,
      cb: cb,
      instance: instance.<span class="apidocCodeKeywordSpan">toString</span>()
    }))

  result[0] = err
}

// Special legacy case for seneca-perm
else if (err.orig &amp;&amp;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.use" id="apidoc.element.seneca.use">
        function <span class="apidocSignatureSpan">seneca.</span>use
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function top_use() {
  var argsarr = new Array(arguments.length)
  for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

  var instance = module.exports()

  return instance.use.apply(instance, argsarr)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


// Services can listen for messages using a variety of
// transports. In process and http are included by default.


Seneca()
.<span class="apidocCodeKeywordSpan">use</span>(approver)
.listen({type: 'http', port: '8260', pin: 'cmd:*'})

Seneca()
.use(rejector)
.listen(8270)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.argprops" id="apidoc.element.seneca.util.argprops">
        function <span class="apidocSignatureSpan">seneca.</span>util.argprops
        <span class="apidocSignatureSpan">(defaults, args, fixed, omits)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function argprops(defaults, args, fixed, omits) {
  omits = _.isArray(omits) ? omits
    : _.isObject(omits) ? _.keys(omits)
    : _.isString(omits) ? omits.split(/\s*,\s*/)
    : '' + omits

  // a little pre omit to avoid entities named in omits
  var usedargs = _.omit(args, omits)

  // don't support $ args
  usedargs = clean(usedargs)

  return _.omit(deepextend(defaults, usedargs, fixed), omits)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.clean" id="apidoc.element.seneca.util.clean">
        function <span class="apidocSignatureSpan">seneca.</span>util.clean
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clean(obj) {
  if (obj === null) return obj

  return _.pickBy(obj, function (val, prop) {
    return !_.includes(prop, '$')
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // See [`seneca.add`](#seneca.add)
  function api_add () {
var self = this
var args = Common.parsePattern(self, arguments, 'action:f? actmeta:o?')

var raw_pattern = args.pattern

var pattern = self.<span class="apidocCodeKeywordSpan">util.clean</span>(raw_pattern)

if (!_.keys(pattern)) {
  throw error('add_empty_pattern', {args: Common.clean(args)})
}


var action = args.action || function default_action (msg, done) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.copydata" id="apidoc.element.seneca.util.copydata">
        function <span class="apidocSignatureSpan">seneca.</span>util.copydata
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">util.copydata = function (obj) {
  var copy

  // Handle the 3 simple types, and null or undefined
  if (obj === null || typeof obj !== 'object') return obj

  // Handle Date
  if (_.isDate(obj)) {
    copy = new Date()
    copy.setTime(obj.getTime())
    return copy
  }

  // Handle Array
  if (_.isArray(obj)) {
    copy = []
    for (var i = 0, len = obj.length; i &lt; len; ++i) {
      copy[i] = copydata(obj[i])
    }
    return copy
  }

  // Handle Object
  if (_.isObject(obj)) {
    copy = {}
    for (var attr in obj) {
      if (obj.hasOwnProperty(attr)) copy[attr] = copydata(obj[attr])
    }
    return copy
  }

  throw new Error("Unable to copy obj! Its type isn't supported.")
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.deepextend" id="apidoc.element.seneca.util.deepextend">
        function <span class="apidocSignatureSpan">seneca.</span>util.deepextend
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deepextend() {
  var argsarr = new Array(arguments.length)
  for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

  // Lodash uses the reverse order to apply defaults than the deepextend API.
  argsarr = argsarr.reverse()

  // Add an empty object to the front of the args.  Defaults will be written
  // to this empty object.
  argsarr.unshift({})

  return _.defaultsDeep.apply(_, argsarr)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.nil" id="apidoc.element.seneca.util.nil">
        function <span class="apidocSignatureSpan">seneca.</span>util.nil
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function nil() {
  _.each(arguments, function (arg) {
    if (_.isFunction(arg)) {
      return arg()
    }
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.parsepattern" id="apidoc.element.seneca.util.parsepattern">
        function <span class="apidocSignatureSpan">seneca.</span>util.parsepattern
        <span class="apidocSignatureSpan">(instance, args, normaspec, fixed)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse_pattern(instance, args, normaspec, fixed) {
  args =
    Norma('{strargs:s? objargs:o? moreobjargs:o? ' + (normaspec || '') + '}', args)

  try {
    return _.extend(
      args,
      { pattern: _.extend(
          {},

          // Precedence of arguments in add,act is left-to-right
          args.moreobjargs ? args.moreobjargs : {},
          args.objargs ? args.objargs : {},
          args.strargs ? Jsonic(args.strargs) : {},

          fixed || {})
      })
  }
  catch (e) {
    var col = (e.line === 1) ? e.column - 1 : e.column
    throw internals.error('add_string_pattern_syntax', {
      argstr: args,
      syntax: e.message,
      line: e.line,
      col: col
    })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.pattern" id="apidoc.element.seneca.util.pattern">
        function <span class="apidocSignatureSpan">seneca.</span>util.pattern
        <span class="apidocSignatureSpan">(patobj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pattern(patobj) {
  if (_.isString(patobj)) {
    return patobj
  }

  patobj = patobj || {}
  var sb = []
  _.each(patobj, function (v, k) {
    if (!~k.indexOf('$') &amp;&amp; !_.isFunction(v)) {
      sb.push(k + ':' + v)
    }
  })

  sb.sort()

  return sb.join(',')
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.pincanon" id="apidoc.element.seneca.util.pincanon">
        function <span class="apidocSignatureSpan">seneca.</span>util.pincanon
        <span class="apidocSignatureSpan">(inpin)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pincanon(inpin) {
  if (_.isString(inpin)) {
    return pattern(Jsonic(inpin))
  }
  else if (_.isArray(inpin)) {
    var pin = _.map(inpin, pincanon)
    pin.sort()
    return pin.join(';')
  }
  else {
    return pattern(inpin)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.print" id="apidoc.element.seneca.util.print">
        function <span class="apidocSignatureSpan">seneca.</span>util.print
        <span class="apidocSignatureSpan">(err, out)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function print(err, out) {
  if (err) { console.log('ERROR: ' + err.message) }
  else { console.log(Util.inspect(out, {depth: null})) }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.recurse" id="apidoc.element.seneca.util.recurse">
        function <span class="apidocSignatureSpan">seneca.</span>util.recurse
        <span class="apidocSignatureSpan">(list, work, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function recurse(list, work, done) {
  var ctxt = this

  if (_.isNumber(list)) {
    list = _.range(0, list)
  }
  else {
    list = _.clone(list)
  }

  function next (err, out) {
    if (err) return done(err, out)

    var item = list.shift()

    if (void 0 !== item) {
      work.call(ctxt, item, next)
    }
    else {
      done.call(ctxt, err, out)
    }
  }
  next.call(ctxt)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.router" id="apidoc.element.seneca.util.router">
        function <span class="apidocSignatureSpan">seneca.</span>util.router
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function router() { return Patrun() }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>














</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.Seneca" id="apidoc.module.seneca.Seneca">module seneca.Seneca</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.Seneca.Seneca" id="apidoc.element.seneca.Seneca.Seneca">
        function <span class="apidocSignatureSpan">seneca.</span>Seneca
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Seneca() {
  Events.EventEmitter.call(this)
  this.setMaxListeners(0)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.Seneca.super_" id="apidoc.element.seneca.Seneca.super_">
        function <span class="apidocSignatureSpan">seneca.Seneca.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.actions" id="apidoc.module.seneca.actions">module seneca.actions</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.actions.find" id="apidoc.element.seneca.actions.find">
        function <span class="apidocSignatureSpan">seneca.actions.</span>find
        <span class="apidocSignatureSpan">(pattern, flags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">find = function (pattern, flags) {
  var seneca = this

  var pat = _.isString(pattern) ? Jsonic(pattern) : pattern
  pat = seneca.util.clean(pat)
  pat = pat || {}

  var actmeta = seneca.private$.actrouter.find(pat)

  if (!actmeta &amp;&amp; flags &amp;&amp; flags.catchall) {
    actmeta = seneca.private$.actrouter.find({})
  }

  return actmeta
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      private$.handle_sub = function handle_sub (args, result) {
        args.meta$ = args.meta$ || {}

        if (!args.meta$.prior || !args.meta$.prior.entry) {
return
        }

        var subfuncs = private$.subrouter.<span class="apidocCodeKeywordSpan">find</span>(args)

        if (subfuncs) {
args.meta$.sub = subfuncs.pattern

_.each(subfuncs, function subfunc (subfunc) {
  try {
    subfunc.call(self, args, result)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.actions.has" id="apidoc.element.seneca.actions.has">
        function <span class="apidocSignatureSpan">seneca.actions.</span>has
        <span class="apidocSignatureSpan">(pattern)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">has = function (pattern) {
  return !!exports.find.call(this, pattern)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.actions.list" id="apidoc.element.seneca.actions.list">
        function <span class="apidocSignatureSpan">seneca.actions.</span>list
        <span class="apidocSignatureSpan">(pattern)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (pattern) {
  var pat = _.isString(pattern) ? Jsonic(pattern) : pattern
  var found = this.private$.actrouter.list(pat)
  found = _.map(found, 'match')
  return found
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

var pins = []
var patterns = _.flatten(argsarr)

_.each(patterns, function (pattern) {
  pattern = _.isString(pattern) ? Jsonic(pattern) : pattern
  pins = pins.concat(_.map(private$.actrouter.<span class="apidocCodeKeywordSpan">list</span>(pattern),
    function (desc) {
      return desc.match
    }
  ))
})

return pins
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.common" id="apidoc.module.seneca.common">module seneca.common</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.common.argprops" id="apidoc.element.seneca.common.argprops">
        function <span class="apidocSignatureSpan">seneca.common.</span>argprops
        <span class="apidocSignatureSpan">(defaults, args, fixed, omits)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function argprops(defaults, args, fixed, omits) {
  omits = _.isArray(omits) ? omits
    : _.isObject(omits) ? _.keys(omits)
    : _.isString(omits) ? omits.split(/\s*,\s*/)
    : '' + omits

  // a little pre omit to avoid entities named in omits
  var usedargs = _.omit(args, omits)

  // don't support $ args
  usedargs = clean(usedargs)

  return _.omit(deepextend(defaults, usedargs, fixed), omits)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.boolify" id="apidoc.element.seneca.common.boolify">
        function <span class="apidocSignatureSpan">seneca.common.</span>boolify
        <span class="apidocSignatureSpan">(v)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">boolify = function (v) {
  try {
    return !!JSON.parse(v)
  }
  catch (e) {
    return !!v
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    sourcemap.argv
  )

  // Legacy log settings.
  out.log = out.log || out.logger || out.logging || {}

  // boolean corrections
  out.legacy.logging = Common.<span class="apidocCodeKeywordSpan">boolify</span>(out.legacy.logging)

  return out
}


function parse_command_line (spec, parsedSpec) {
  var logSpec = _.isArray(spec) ? spec[0] : spec
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.clean" id="apidoc.element.seneca.common.clean">
        function <span class="apidocSignatureSpan">seneca.common.</span>clean
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clean(obj) {
  if (obj === null) return obj

  return _.pickBy(obj, function (val, prop) {
    return !_.includes(prop, '$')
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // See [`seneca.add`](#seneca.add)
  function api_add () {
var self = this
var args = Common.parsePattern(self, arguments, 'action:f? actmeta:o?')

var raw_pattern = args.pattern

var pattern = self.util.<span class="apidocCodeKeywordSpan">clean</span>(raw_pattern)

if (!_.keys(pattern)) {
  throw error('add_empty_pattern', {args: Common.clean(args)})
}


var action = args.action || function default_action (msg, done) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.console_error" id="apidoc.element.seneca.common.console_error">
        function <span class="apidocSignatureSpan">seneca.common.</span>console_error
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">console_error = function () {
  console.error.apply(null, arguments)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    })
  })
}

var handleClose = function () {
  root.close(function (err) {
    if (err) {
      Common.<span class="apidocCodeKeywordSpan">console_error</span>(err)
    }

    process.exit(err ? (err.exit === null ? 1 : err.exit) : 0)
  })
}

// close seneca instance
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.copydata" id="apidoc.element.seneca.common.copydata">
        function <span class="apidocSignatureSpan">seneca.common.</span>copydata
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">copydata = function (obj) {
  var copy

  // Handle the 3 simple types, and null or undefined
  if (obj === null || typeof obj !== 'object') return obj

  // Handle Date
  if (_.isDate(obj)) {
    copy = new Date()
    copy.setTime(obj.getTime())
    return copy
  }

  // Handle Array
  if (_.isArray(obj)) {
    copy = []
    for (var i = 0, len = obj.length; i &lt; len; ++i) {
      copy[i] = copydata(obj[i])
    }
    return copy
  }

  // Handle Object
  if (_.isObject(obj)) {
    copy = {}
    for (var attr in obj) {
      if (obj.hasOwnProperty(attr)) copy[attr] = copydata(obj[attr])
    }
    return copy
  }

  throw new Error("Unable to copy obj! Its type isn't supported.")
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function action_options_get (args, done) {
  var options = private$.optioner.get()

  var base = args.base || null
  var root = base ? (options[base] || {}) : options
  var val = args.key ? root[args.key] : root

  done(null, Common.<span class="apidocCodeKeywordSpan">copydata</span>(val))
}

_.each(so.internal.close_signals, function (active, signal) {
  if (active) {
    process.once(signal, handleClose)
  }
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.deepextend" id="apidoc.element.seneca.common.deepextend">
        function <span class="apidocSignatureSpan">seneca.common.</span>deepextend
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deepextend() {
  var argsarr = new Array(arguments.length)
  for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

  // Lodash uses the reverse order to apply defaults than the deepextend API.
  argsarr = argsarr.reverse()

  // Add an empty object to the front of the args.  Defaults will be written
  // to this empty object.
  argsarr.unshift({})

  return _.defaultsDeep.apply(_, argsarr)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  callpoint: callpoint
})

root.util = seneca_util


// Configure logging
private$.exports = { options: Common.<span class="apidocCodeKeywordSpan">deepextend</span>({}, so) }
private$.decorations = {}

private$.logger = load_logger(root, so.internal.logger)
root.log = make_log(root, default_log_modifier)


// Error events are fatal, unless you're undead.  These are not the
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.delegate" id="apidoc.element.seneca.common.delegate">
        function <span class="apidocSignatureSpan">seneca.common.</span>delegate
        <span class="apidocSignatureSpan">(scope, func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delegate = function (scope, func) {
  var args = Array.prototype.slice.call(arguments, 2)
  return function () {
    return func.apply(scope, args.concat(Array.prototype.slice.call(arguments)))
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var is_sync = _.isFunction(actdone)
var execute_instance = instance
var timedout = false

actdone = actdone || _.noop

if (msg.gate$) {
  execute_instance = instance.<span class="apidocCodeKeywordSpan">delegate</span>()
  execute_instance.private$.ge =
    execute_instance.private$.ge.gate()
}

var execspec = {
  fn: function act_fn (done) {
    try {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.make_standard_act_log_entry" id="apidoc.element.seneca.common.make_standard_act_log_entry">
        function <span class="apidocSignatureSpan">seneca.common.</span>make_standard_act_log_entry
        <span class="apidocSignatureSpan">(actmeta, msg, origmsg, ctxt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">make_standard_act_log_entry = function (actmeta, msg, origmsg, ctxt) {
  var transport = origmsg.transport$ || {}
  var callmeta = msg.meta$ || {}
  var prior = callmeta.prior || {}
  actmeta = actmeta || {}

  return _.extend({
    actid: callmeta.id,
    msg: msg,
    entry: prior.entry,
    prior: prior.chain,
    gate: origmsg.gate$,
    caller: origmsg.caller$,
    meta: actmeta,

    // these are transitional as need to be updated
    // to standard transport metadata
    client: actmeta.client,
    listen: !!transport.origin,
    transport: transport
  }, ctxt)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.make_standard_err_log_entry" id="apidoc.element.seneca.common.make_standard_err_log_entry">
        function <span class="apidocSignatureSpan">seneca.common.</span>make_standard_err_log_entry
        <span class="apidocSignatureSpan">(err, ctxt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">make_standard_err_log_entry = function (err, ctxt) {
  if (!err) return ctxt

  return _.extend({
    notice: err.message,
    code: err.code,
    err: err
  }, ctxt)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
}

var err = internals.error.apply(null, argsarr)
err.callpoint = new Error().stack.match(/^.*\n.*\n\s*(.*)/)[1]
err.seneca = { code: err.code, valmap: err.details }

this.log.error(Common.<span class="apidocCodeKeywordSpan">make_standard_err_log_entry</span>(err))
if (so.errhandler) {
  so.errhandler.call(this, err)
}

if (cb) {
  cb.call(this, err)
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.makedie" id="apidoc.element.seneca.common.makedie">
        function <span class="apidocSignatureSpan">seneca.common.</span>makedie
        <span class="apidocSignatureSpan">(instance, ctxt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">makedie = function (instance, ctxt) {
  ctxt = _.extend(ctxt, instance.die ? instance.die.context : {})

  var die = function (err) {
    var die_trace = '\n' + (new Error('die trace').stack)
        .match(/^.*?\n.*\n(.*)/)[1]

    try {
      if (!err) {
        err = new Error('unknown')
      }
      else if (!Util.isError(err)) {
        err = new Error(_.isString(err) ? err : Util.inspect(err))
      }

      err.fatal$ = true

      var so = instance.options()

      // undead is only for testing, do not use in production
      var undead = (so.debug &amp;&amp; so.debug.undead) || (err &amp;&amp; err.undead)

      var logdesc = {
        kind: ctxt.txt,
        plugin: ctxt.plugin,
        tag: ctxt.tag,
        id: ctxt.id,
        code: err.code,
        notice: err.message,
        err: err,
        callpoint: ctxt.callpoint()
      }

      instance.log.fatal.apply(instance, logdesc)

      var stack = err.stack || ''
      stack = stack.replace(/^.*?\n/, '\n')

      var procdesc = '\n  pid=' + process.pid +
        ', arch=' + process.arch +
        ', platform=' + process.platform +
        ',\n  path=' + process.execPath +
        ',\n  argv=' + Util.inspect(process.argv).replace(/\n/g, '') +
        ',\n  env=' + Util.inspect(process.env).replace(/\n/g, '')

      var fatalmodemsg = instance.fixedargs.fatal$
        ? '\n  ALL ERRORS FATAL: action called with argument fatal$:true ' +
        '(probably a plugin init error, or using a plugin seneca instance)' : ''

      var stderrmsg =
      '\n\n' +
        'Seneca Fatal Error\n' +
        '==================\n\n' +
        'Message: ' + err.message + '\n\n' +
        'Code: ' + err.code + '\n\n' +
        'Details: ' + Util.inspect(err.details, {depth: null}) + '\n\n' +
        'Stack: ' + stack + '\n\n' +
        'Instance: ' + instance.toString() + fatalmodemsg + die_trace + '\n\n' +
        'When: ' + new Date().toISOString() + '\n\n' +
        'Log: ' + Jsonic.stringify(logdesc) + '\n\n' +
        'Node:\n  ' + Util.inspect(process.versions).replace(/\s+/g, ' ') +
        ',\n  ' + Util.inspect(process.features).replace(/\s+/g, ' ') +
        ',\n  ' + Util.inspect(process.moduleLoadList).replace(/\s+/g, ' ') + '\n\n' +
        'Process: ' + procdesc + '\n\n'

      if (so.errhandler) {
        so.errhandler.call(instance, err)
      }

      if (instance.closed) {
        return
      }

      if (!undead) {
        instance.act('role:seneca,info:fatal,closing$:true', {err: err})

        instance.close(
          // terminate process, err (if defined) is from seneca.close
          function (err) {
            if (!undead) {
              process.nextTick(function () {
                if (err) {
                  exports.console_error(err)
                }

                exports.console_error(stderrmsg)
                exports.console_error('\n\nSENECA TERMINATED at ' + (new Date().toISOString()) +
                  '. See above for error report.\n\n')
                process.exit(1)
              })
            }
          }
       )
      }

      // make sure we close down within options.deathdelay seconds
      if (!undead) {
        var killtimer = setTimeout(function () {
          exports.console_error(stderrmsg)
          exports.console_error('\n\nSENECA TERMINATED (on timeout) at ' +
            (new Date().toISOString()) + '.\n\n')
          process.exit(2)
        }, so.deathdelay)
        killtimer.unref()
      }
    }
    catch (panic) {
      var msg =
      '\n\n' +
        'Seneca Panic\n' +
        '============\n\n' +
        panic.stack +
        '\n\nOriginal Error:\n' +
        (arguments[0] &amp;&amp; arguments[0].stack ? arguments[0].stack : arguments[0])
      exports.console_error(msg)
    }
  }

  die.context = ctxt

  return die
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  so.idlen = 2
  root.idgen = Nid({length: so.idlen})
  root.id = root.idgen() + '/' + so.tag
}

root.fullname = 'Seneca/' + root.id

root.die = Common.<span class="apidocCodeKeywordSpan">makedie</span>(root, {
  type: 'sys',
  plugin: 'seneca',
  tag: root.version,
  id: root.id,
  callpoint: callpoint
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.nil" id="apidoc.element.seneca.common.nil">
        function <span class="apidocSignatureSpan">seneca.common.</span>nil
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function nil() {
  _.each(arguments, function (arg) {
    if (_.isFunction(arg)) {
      return arg()
    }
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.parsePattern" id="apidoc.element.seneca.common.parsePattern">
        function <span class="apidocSignatureSpan">seneca.common.</span>parsePattern
        <span class="apidocSignatureSpan">(instance, args, normaspec, fixed)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse_pattern(instance, args, normaspec, fixed) {
  args =
    Norma('{strargs:s? objargs:o? moreobjargs:o? ' + (normaspec || '') + '}', args)

  try {
    return _.extend(
      args,
      { pattern: _.extend(
          {},

          // Precedence of arguments in add,act is left-to-right
          args.moreobjargs ? args.moreobjargs : {},
          args.objargs ? args.objargs : {},
          args.strargs ? Jsonic(args.strargs) : {},

          fixed || {})
      })
  }
  catch (e) {
    var col = (e.line === 1) ? e.column - 1 : e.column
    throw internals.error('add_string_pattern_syntax', {
      argstr: args,
      syntax: e.message,
      line: e.line,
      col: col
    })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

return exportval
  }

  function api_sub () {
var self = this

var subargs = Common.<span class="apidocCodeKeywordSpan">parsePattern</span>(self, arguments, 'action:f actmeta:o?')
var pattern = subargs.pattern
if (pattern.in$ == null &amp;&amp;
  pattern.out$ == null &amp;&amp;
  pattern.error$ == null &amp;&amp;
  pattern.cache$ == null &amp;&amp;
  pattern.default$ == null &amp;&amp;
  pattern.client$ == null) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.pattern" id="apidoc.element.seneca.common.pattern">
        function <span class="apidocSignatureSpan">seneca.common.</span>pattern
        <span class="apidocSignatureSpan">(patobj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pattern(patobj) {
  if (_.isString(patobj)) {
    return patobj
  }

  patobj = patobj || {}
  var sb = []
  _.each(patobj, function (v, k) {
    if (!~k.indexOf('$') &amp;&amp; !_.isFunction(v)) {
      sb.push(k + ':' + v)
    }
  })

  sb.sort()

  return sb.join(',')
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      handle_sub(args, result)
    }
  }

  var subs = private$.subrouter.find(pattern)
  if (!subs) {
    private$.subrouter.add(pattern, subs = [])
    subs.pattern = Common.<span class="apidocCodeKeywordSpan">pattern</span>(pattern)
  }
  subs.push(subargs.action)

  return self
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.pincanon" id="apidoc.element.seneca.common.pincanon">
        function <span class="apidocSignatureSpan">seneca.common.</span>pincanon
        <span class="apidocSignatureSpan">(inpin)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pincanon(inpin) {
  if (_.isString(inpin)) {
    return pattern(Jsonic(inpin))
  }
  else if (_.isArray(inpin)) {
    var pin = _.map(inpin, pincanon)
    pin.sort()
    return pin.join(';')
  }
  else {
    return pattern(inpin)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
})

var opts = self.options(null).transport || {}

var raw_config = internals.parse_config(argsarr)

// pg: pin group
raw_config.pg = Common.<span class="apidocCodeKeywordSpan">pincanon</span>(raw_config.pin || raw_config.pins)

var config = internals.resolveConfig(raw_config, opts)

config.id = config.id || Common.pattern(raw_config)

var pins = config.pins ||
      (_.isArray(config.pin) ? config.pin : [config.pin || ''])
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.print" id="apidoc.element.seneca.common.print">
        function <span class="apidocSignatureSpan">seneca.common.</span>print
        <span class="apidocSignatureSpan">(err, out)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function print(err, out) {
  if (err) { console.log('ERROR: ' + err.message) }
  else { console.log(Util.inspect(out, {depth: null})) }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.recurse" id="apidoc.element.seneca.common.recurse">
        function <span class="apidocSignatureSpan">seneca.common.</span>recurse
        <span class="apidocSignatureSpan">(list, work, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function recurse(list, work, done) {
  var ctxt = this

  if (_.isNumber(list)) {
    list = _.range(0, list)
  }
  else {
    list = _.clone(list)
  }

  function next (err, out) {
    if (err) return done(err, out)

    var item = list.shift()

    if (void 0 !== item) {
      work.call(ctxt, item, next)
    }
    else {
      done.call(ctxt, err, out)
    }
  }
  next.call(ctxt)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.common.tagnid" id="apidoc.element.seneca.common.tagnid">
        function <span class="apidocSignatureSpan">seneca.common.</span>tagnid
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tagnid = function () {
    return generate(opts)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.legacy" id="apidoc.module.seneca.legacy">module seneca.legacy</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.legacy.fail" id="apidoc.element.seneca.legacy.fail">
        function <span class="apidocSignatureSpan">seneca.legacy.</span>fail
        <span class="apidocSignatureSpan">(so)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function make_legacy_fail(so) {
  return function () {
    var argsarr = new Array(arguments.length)
    for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

    var cb = _.isFunction(argsarr[argsarr.length - 1])
      ? argsarr[argsarr.length - 1] : null

    if (cb) {
      argsarr.pop()
    }

    if (_.isObject(argsarr[0])) {
      var code = argsarr[0].code
      if (_.isString(code)) {
        argsarr.unshift(code)
      }
    }

    var err = internals.error.apply(null, argsarr)
    err.callpoint = new Error().stack.match(/^.*\n.*\n\s*(.*)/)[1]
    err.seneca = { code: err.code, valmap: err.details }

    this.log.error(Common.make_standard_err_log_entry(err))
    if (so.errhandler) {
      so.errhandler.call(this, err)
    }

    if (cb) {
      cb.call(this, err)
    }

    return err
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
root.fix = api_fix
root.delegate = api_delegate

// Legacy API; Deprecated.
root.findact = root.find

// DEPRECATED
root.fail = Legacy.<span class="apidocCodeKeywordSpan">fail</span>(so)

// Identifier generator.
root.idgen = Nid({length: so.idlen})
so.tag = so.tag || option_defaults.tag
so.tag = so.tag === 'undefined' ? option_defaults.tag : so.tag

// Create a unique identifer for this instance.
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.logging" id="apidoc.module.seneca.logging">module seneca.logging</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.logging.logging" id="apidoc.element.seneca.logging.logging">
        function <span class="apidocSignatureSpan">seneca.</span>logging
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function logging(options) {
  // Everything is in preload as logging plugins are
  // a special case that need to be loaded before any calls to seneca.log.
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.logging.preload" id="apidoc.element.seneca.logging.preload">
        function <span class="apidocSignatureSpan">seneca.logging.</span>preload
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">preload = function () {
  var seneca = this
  var so = seneca.options()
  var logspec = so.log.basic || so.log || {}

  var origspec = logspec

  if (_.isString(logspec)) {
    if ('quiet' === logspec) {
      logspec = {level: 'none'}
    }
    else if ('silent' === logspec) {
      logspec = {level: 'none'}
    }
    else if ('any' === logspec) {
      logspec = {level: 'debug+'}
    }
    else if ('all' === logspec) {
      logspec = {level: 'debug+'}
    }
    else if ('print' === logspec) {
      logspec = {level: 'debug+'}
    }
    else if ('standard' === logspec) {
      logspec = {level: 'info+'}
    }
    else if ('test' === logspec) {
      logspec = {level: 'warn+'}
    }
  }

  var logrouter = LogFilter(logspec)

  var logger = function (seneca, data) {
    if (logrouter(data)) {
      console.log(Stringify(data))
    }
  }

  // Test mode prints more readable logs
  if (so.test) {
    logger = function (seneca, data) {
      if (logrouter(data)) {
        try {
          var logstr
          var time = data.when - seneca.start_time

          if ('test' === origspec || 'print' === origspec) {
            var logb = [
              time + '/' + seneca.id.substring(0, 2),
              data.kind + (data.case ? '/' + data.case : '')]

            if ('act' === data.kind) {
              if (data.msg) {
                logb.push(data.msg.meta$.id.split('/').map(function (s) {
                  return s.substring(0, 2)
                }).join('/'))

                logb.push(data.msg.meta$.pattern)
              }

              logb.push(Util.inspect(seneca.util.clean(data.result || data.msg))
                        .replace(/\s+/g, '')
                        .substring(0, 88))

              if (data.notice) {
                logb.push(data.notice)
              }

              if ('ERR' === data.case) {
                logb.push('\n\n' + data.err.stack + '\n' + data.caller + '\n')
              }
            }
            else if ('add' === data.kind) {
              logb.push(data.pattern)
            }
            else if ('plugin' === data.kind) {
              logb.push(data.plugin_name +
                        (data.plugin_tag ? '/' + data.plugin_tag : ''))
            }
            else if ('options' === data.kind) {
            }
            else if ('notice' === data.kind) {
              logb.push(data.notice)
            }
            else {
              logb.push(Util.inspect(data).replace(/\n/g, ' '))
            }

            logstr = logb.join('\t')
          }
          else {
            logstr = Util.inspect(data, {depth: null})
            logstr =
              time + ':\n\t' +
              logstr.replace(/\n/g, '\n\t') +
              '\n------------------------------------------------\n\n'
          }

          console.log(logstr)
        }
        catch (e) {
          console.log(data)
        }
      }
    }
  }

  return {
    extend: {
      logger: logger
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.optioner" id="apidoc.module.seneca.optioner">module seneca.optioner</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.optioner.optioner" id="apidoc.element.seneca.optioner.optioner">
        function <span class="apidocSignatureSpan">seneca.</span>optioner
        <span class="apidocSignatureSpan">(callmodule, defaults, orig_initial)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">optioner = function (callmodule, defaults, orig_initial) {

  var sourcemap = {
    argv: {},
    env: {},
    default_file: {},
    loaded: {}
  }

  // Must be defined here as prepare depends on it.
  var options = {}

  var basemodule = orig_initial.module || callmodule.parent || callmodule
  options = prepare(basemodule, defaults, orig_initial)

  // Not needed after this point, and screws up debug printing.
  delete options.module


  function prepare (basemodule, defaults, initial) {
    var DEFAULT_OPTIONS_FILE = './seneca.options.js'
    var FATAL_OPTIONS_FILE = './options.seneca.js'

    // Load from custom file, either by providing a string,
    // or having a property 'from' that is a string.
    // The string is interpreted as a file path.

    var from = initial.from
    if (_.isString(initial)) {
      from = initial
      initial = {}
    }

    if (_.isString(from)) {
      sourcemap.loaded = load_options(from)
    }


    var argv = Minimist(process.argv.slice(2))


    if (Fs.existsSync(FATAL_OPTIONS_FILE)) {
      throw error('inverted_file_name', {
        from: FATAL_OPTIONS_FILE, module: basemodule
      })
    }

    try {
      sourcemap.default_file = basemodule.require(DEFAULT_OPTIONS_FILE)
    }
    catch (e) {
      if (e.code !== 'MODULE_NOT_FOUND') {
        var wrappedError = {
          errmsg: e.message,
          from: DEFAULT_OPTIONS_FILE,
          module: basemodule
        }

        throw error(e, 'require_default_options', wrappedError)
      }
    }

    if (process.env.SENECA_OPTIONS) {
      sourcemap.env = Common.deepextend({}, sourcemap.env,
                                        Jsonic(process.env.SENECA_OPTIONS))
    }

    if (argv.seneca) {
      if (_.isObject(argv.seneca.options)) {
        sourcemap.argv = argv.seneca.options
      }
      else if (_.isString(argv.seneca.options)) {
        if (argv.seneca.options === 'print') {
          sourcemap.argv = { debug: {print: {options: true}} }
        }
        else {
          sourcemap.argv = Jsonic(argv.seneca.options)
        }
      }

      if (_.isString(sourcemap.argv.from)) {
        sourcemap.argv = Common.deepextend(load_options(sourcemap.argv.from),
                                           sourcemap.argv)
      }

      if (null != argv.seneca.tag) {
        sourcemap.argv.tag = '' + argv.seneca.tag
      }

      if (argv.seneca.log) {
        sourcemap.argv.log = sourcemap.argv.log || {}
        parse_command_line(argv.seneca.log, sourcemap.argv)
      }
    }

    // This is the list of option sources.
    // The list is in reverse precedence order,
    // i.e. command line arguments (argv) win
    var out = Common.deepextend(
      {},
      defaults,
      sourcemap.default_file,
      options,
      sourcemap.loaded,
      initial,
      sourcemap.env,
      sourcemap.argv
    )

    // Legacy log settings.
    out.log = out.log || out.logger || out.logging || {}

    // boolean corrections
    out.legacy.logging = Common.boolify(out.legacy.logging)

    return out
  }


  function parse_command_line (spec, parsedSpec) {
    var logSpec = _.isArray(spec) ? spec[0] : spec

    if (_.isString(logSpec)) {
      try {
        parsedSpec.log = Jsonic(logSpec)
      }
      catch (e) {
        parsedSpec.log = {}
      }
      return
    }

    if (_.isObject(logSpec)) {
      parsedSpec.log = {}
      var logType = Object.keys(logSpec.level || logSpec)
      if (logType.length &gt; 0) {
        parsedSpec.log = { level: logType[0] }
      }
    }
  }


  function set_options (input) {
    if (null == input) throw error('no_options')

    // DEPRECATED: Remove when Seneca &gt;= 4.x
    if (_.isString(input)) {
      options = prepare(basemodule, defaults, input)
    }
    else {
      options = Common.deepextend(options, input)
    }

    return options
  }


  function get_options () {
    return options
  }


  function load_options (from) {
    var out = {}


    if (from.match(/\.json$/i)) {
      // this is deliberate, options are ALWAYS loaded synchronously
      var text = Fs.readFileSync(from).toString()
      out = ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.plugins" id="apidoc.module.seneca.plugins">module seneca.plugins</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.plugins.make_delegate" id="apidoc.element.seneca.plugins.make_delegate">
        function <span class="apidocSignatureSpan">seneca.plugins.</span>make_delegate
        <span class="apidocSignatureSpan">(instance, plugin)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function make_delegate(instance, plugin) {
  // Adjust Seneca API to be plugin specific.
  var delegate = instance.delegate({
    plugin$: {
      name: plugin.name,
      tag: plugin.tag
    },

    // Act calls inside the plugin definition function are not gated.
    // ungate$: true,
    fatal$: true
  })

  delegate.plugin_foo = true

  delegate.private$ = Object.create(instance.private$)
  delegate.private$.ge = delegate.private$.ge.gate()

  delegate.log = instance.make_log(
    delegate,
    function plugin_delegate_log_modifier (data) {
      data.plugin_name = plugin.name
      data.plugin_tag = plugin.tag
    })

  delegate.die = Common.makedie(delegate, { type: 'plugin', plugin: plugin.name })

  var actmetalist = []

  delegate.add = function () {
    var argsarr = new Array(arguments.length)
    for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

    var actmeta = argsarr[argsarr.length - 1] || {}

    if (_.isFunction(actmeta)) {
      actmeta = {}
      argsarr.push(actmeta)
    }

    actmeta.plugin_name = plugin.name || '-'
    actmeta.plugin_tag = plugin.tag || '-'
    actmeta.plugin_fullname = plugin.fullname

    // TODO: is this necessary?
    actmeta.log = delegate.log

    actmetalist.push(actmeta)

    instance.add.apply(delegate, argsarr)

    return delegate
  }

  delegate.__update_plugin__ = function (plugin) {
    delegate.context.name = plugin.name || '-'
    delegate.context.tag = plugin.tag || '-'
    delegate.context.full = plugin.fullname || '-'

    _.each(actmetalist, function (actmeta) {
      actmeta.plugin_name = plugin.name || actmeta.plugin_name || '-'
      actmeta.plugin_tag = plugin.tag || actmeta.plugin_tag || '-'
      actmeta.plugin_fullname =
        plugin.fullname || actmeta.plugin_fullname || '-'
    })
  }

  delegate.context.module = plugin.parent || module
  delegate.context.name = plugin.name || '-'
  delegate.context.tag = plugin.tag || '-'
  delegate.context.full = plugin.fullname
  delegate.context.isplugin = true

  return delegate
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var pins = config.pins ||
      (_.isArray(config.pin) ? config.pin : [config.pin || ''])

pins = _.map(pins, function (pin) {
  return _.isString(pin) ? Jsonic(pin) : pin
})

var sd = Plugins.<span class="apidocCodeKeywordSpan">make_delegate</span>(self, { name: 'client$', tag: void 0 })

var sendclient


var transport_client = function transport_client (msg, done) {
  if (msg.local$) {
    this.prior(msg, done)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.plugins.register" id="apidoc.element.seneca.plugins.register">
        function <span class="apidocSignatureSpan">seneca.plugins.</span>register
        <span class="apidocSignatureSpan">(so, callpoint)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">register = function (so, callpoint) {
  var seq = 0

  return function api_register (plugin) {
    var seneca = this

    var preload = plugin.init.preload
    preload = _.isFunction(preload) ? preload : _.noop
    var meta = preload.call(seneca, plugin) || {}

    var fullname = plugin.name + (plugin.tag ? '/' + plugin.tag : '')
    plugin.fullname = fullname

    var delegate = make_delegate(seneca, plugin)

    seq++

    var plugin_define_pattern = {
      role: 'seneca',
      plugin: 'define',
      name: plugin.name,
      seq: seq
    }

    if (plugin.tag !== null) {
      plugin_define_pattern.tag = plugin.tag
    }

    // seneca
    delegate
      .add(plugin_define_pattern, plugin_definition)
      .act({
        role: 'seneca',
        plugin: 'define',
        name: plugin.name,
        tag: plugin.tag,
        seq: seq,
        default$: {},
        // gate$: true,
        fatal$: true,
        local$: true
      })

    // needed for seneca.export to operate for plugins like seneca-web
    var preloadName = meta.name || plugin.name
    var preloadRef = preloadName + (plugin.tag ? '/' + plugin.tag : '')
    seneca.private$.exports[preloadName] = meta.export || plugin

    resolve_plugin_exports(seneca, preloadRef, meta)

    function plugin_definition (msg, plugin_done) {
      var plugin_seneca = this
      var plugin_options = resolve_options(fullname, plugin, seneca)

      // Update plugin options data in Seneca options.
      var seneca_options = {plugin: {}}
      seneca_options.plugin[fullname] = plugin_options
      seneca.options(seneca_options)

      plugin_seneca.log.debug({
        kind: 'plugin',
        case: 'init',
        name: plugin.name,
        tag: plugin.tag,
        options: plugin_options,
        callpoint: callpoint
      })

      try {
        meta = define_plugin(plugin_seneca, plugin, plugin_options)
      }
      catch (e) {
        // TODO: needs wrapping
        return plugin_done(e)
      }

      // legacy api for service function
      if (_.isFunction(meta)) {
        meta = {service: meta}
      }

      plugin.name = meta.name || plugin.name
      plugin.tag =
        meta.tag ||
        plugin.tag ||
        (plugin.options &amp;&amp; plugin.options.tag$)

      plugin.fullname = plugin.name + (plugin.tag ? '/' + plugin.tag : '')

      plugin.service = meta.service || plugin.service

      plugin_seneca.__update_plugin__(plugin)

      var pluginref = plugin.name + (plugin.tag ? '/' + plugin.tag : '')
      seneca.private$.plugins[pluginref] = plugin

      seneca.private$.plugin_order.byname.push(plugin.name)
      seneca.private$.plugin_order.byname = _.uniq(seneca.private$.plugin_order.byname)
      seneca.private$.plugin_order.byref.push(pluginref)


      var exports = resolve_plugin_exports(plugin_seneca, pluginref, meta)

      plugin_seneca.log.debug({
        kind: 'plugin',
        case: 'install',
        name: plugin.name,
        tag: plugin.tag,
        exports: exports
      })

      plugin_seneca.act(
        {
          init: plugin.name,
          tag: plugin.tag,
          default$: {},
          fatal$: true,
          local$: true
        },
        function (err, out) {
          if (err) {
            var plugin_err_code = 'plugin_init'

            plugin.plugin_error = err.message

            if (err.code === 'action-timeout') {
              plugin_err_code = 'plugin_init_timeout'
              plugin.timeout = so.timeout
            }

            return plugin_seneca.die(internals.error(err, plugin_err_code, plugin))
          }

          var fullname = plugin.name + (plugin.tag ? '$' + plugin.tag : '')

          if (so.debug.print &amp;&amp; so.debug.print.options) {
            console.log('\nSeneca Options (' + seneca.id + '): plugin: ' +
                        fullname + '\n' +
                        '===\n')
            console.log(Util.inspect(plugin_options, { depth: null }))
            console.log('')
          }

          plugin_seneca.log.debug({
            kind: 'plugin',
            case: 'ready',
            name: plugin.name,
            t ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
root.outward = api_outward // Add a modifier function for responses outward
root.test = api_test // Set test mode.

// Method aliases.
root.hasact = root.has

// Non-API methods.
root.register = Plugins.<span class="apidocCodeKeywordSpan">register</span>(so, callpoint)
root.depends = api_depends
root.act_if = api_act_if
root.wrap = api_wrap
root.seneca = api_seneca
root.fix = api_fix
root.delegate = api_delegate
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.print" id="apidoc.module.seneca.print">module seneca.print</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.print.print" id="apidoc.element.seneca.print.print">
        function <span class="apidocSignatureSpan">seneca.</span>print
        <span class="apidocSignatureSpan">(seneca)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">print = function (seneca) {
  var argv = Minimist(process.argv.slice(2))
  if (!argv || !argv.seneca) {
    return
  }
  var cmdspec = argv.seneca
  if (cmdspec.print) {
    if (cmdspec.print.tree) {
      // Hack! Complex init means non-deterministic or multiple ready calls,
      // so just delay tree print by some number of seconds to capture full tree.
      var delay_seconds = cmdspec.print.tree.all || cmdspec.print.tree
      if (_.isNumber(delay_seconds)) {
        setTimeout(function () {
          print_tree(seneca, cmdspec)
        }, 1000 * delay_seconds)
      }
      else {
        // Print after first ready
        seneca.ready(function () {
          print_tree(this, cmdspec)
        })
      }
    }

    if (cmdspec.print.options) {
      seneca.options({ debug: { print: { options: true } } })
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.print.print_options" id="apidoc.element.seneca.print.print_options">
        function <span class="apidocSignatureSpan">seneca.print.</span>print_options
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function print_options(options) {
  if (options.debug.print.options) {
    console.log('\nSeneca Options (' + root.id + '): before plugins\n' + '===\n')
    console.log(Util.inspect(options, { depth: null }))
    console.log('')
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var seneca = make_seneca(initial_options)
var options = seneca.options()

// The 'internal' key of options is reserved for objects and functions
// that provide functionality, and are thus not really printable
seneca.log.debug({kind: 'notice', options: _.omit(options, ['internal'])})

Print.<span class="apidocCodeKeywordSpan">print_options</span>(options)

// TODO: these are core API and should not be decorations
seneca.decorate('hasplugin', Plugins.api_decorations.hasplugin)
seneca.decorate('findplugin', Plugins.api_decorations.findplugin)
seneca.decorate('plugins', Plugins.api_decorations.plugins)

// Register default plugins, unless turned off by options.
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.test" id="apidoc.module.seneca.test">module seneca.test</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.test.test" id="apidoc.element.seneca.test.test">
        function <span class="apidocSignatureSpan">seneca.</span>test
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function top_test() {
  var argsarr = new Array(arguments.length)
  for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

  var instance = module.exports({test: true, log: 'test'})
  instance.test.apply(instance, argsarr)

  return instance
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

var instance = module.exports()

return instance.use.apply(instance, argsarr)
}

// Makes require('seneca').<span class="apidocCodeKeywordSpan">test</span>() work.
module.exports.test = function top_test () {
var argsarr = new Array(arguments.length)
for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

var instance = module.exports({test: true, log: 'test'})
instance.test.apply(instance, argsarr)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.toString" id="apidoc.module.seneca.toString">module seneca.toString</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.toString.toString" id="apidoc.element.seneca.toString.toString">
        function <span class="apidocSignatureSpan">seneca.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toString() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    {},
    err.details,
    {
      message: (err.eraro &amp;&amp; err.orig) ? err.orig.message : err.message,
      pattern: actmeta.pattern,
      fn: actmeta.func,
      cb: cb,
      instance: instance.<span class="apidocCodeKeywordSpan">toString</span>()
    }))

  result[0] = err
}

// Special legacy case for seneca-perm
else if (err.orig &amp;&amp;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.transport" id="apidoc.module.seneca.transport">module seneca.transport</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.transport.client" id="apidoc.element.seneca.transport.client">
        function <span class="apidocSignatureSpan">seneca.transport.</span>client
        <span class="apidocSignatureSpan">(callpoint)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">client = function (callpoint) {
  return function api_client () {
    var argsarr = new Array(arguments.length)
    for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

    var self = this

    self.log.debug({
      kind: 'client',
      options: argsarr,
      callpoint: callpoint()
    })

    var opts = self.options(null).transport || {}

    var raw_config = internals.parse_config(argsarr)

    // pg: pin group
    raw_config.pg = Common.pincanon(raw_config.pin || raw_config.pins)

    var config = internals.resolveConfig(raw_config, opts)

    config.id = config.id || Common.pattern(raw_config)

    var pins = config.pins ||
          (_.isArray(config.pin) ? config.pin : [config.pin || ''])

    pins = _.map(pins, function (pin) {
      return _.isString(pin) ? Jsonic(pin) : pin
    })

    var sd = Plugins.make_delegate(self, { name: 'client$', tag: void 0 })

    var sendclient


    var transport_client = function transport_client (msg, done) {
      if (msg.local$) {
        this.prior(msg, done)
      }
      else {
        sendclient.send.call(this, msg, done)
      }
    }

    transport_client.id = config.id

    if (config.makehandle) {
      transport_client.handle = config.makehandle(config)
    }

    _.each(pins, function (pin) {
      pin = _.clone(pin)
      pin.client$ = true
      pin.internal$ = {catchall: true}

      sd.add(pin, transport_client)
    })


    // Create client.
    sd.act(
      'role:transport,cmd:client',
      { config: config, gate$: true },
      function (err, liveclient) {
        if (err) {
          return sd.die(internals.error(err, 'transport_client', config))
        }

        if (liveclient === null) {
          return sd.die(internals.error('transport_client_null',
                                        Common.clean(config)))
        }

        sendclient = liveclient
      })

    return self
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

Seneca()
.use(local)
.act('cmd:run', handler)

Seneca()
.<span class="apidocCodeKeywordSpan">client</span>({port: 8270, pin: 'cmd:run'})
.client({port: 8260, pin: 'cmd:run'})
.use(local)
.act('cmd:run', handler)

Seneca()
.client({port: 8260, pin: 'cmd:run'})
.client({port: 8270, pin: 'cmd:run'})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.transport.listen" id="apidoc.element.seneca.transport.listen">
        function <span class="apidocSignatureSpan">seneca.transport.</span>listen
        <span class="apidocSignatureSpan">(callpoint)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listen = function (callpoint) {
  return function api_listen () {
    var argsarr = new Array(arguments.length)
    for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

    var self = this
    var lastArg = _.last(argsarr)
    if (typeof lastArg === 'function') {
      argsarr.pop()
    }

    self.log.debug({
      kind: 'listen',
      options: argsarr,
      callpoint: callpoint()
    })

    var opts = self.options().transport || {}
    var config = internals.resolveConfig(internals.parse_config(argsarr), opts)

    self.act(
      'role:transport,cmd:listen',
      { config: config, gate$: true },
      function (err, result) {
        if (err) {
          return self.die(internals.error(err, 'transport_listen', config))
        }

        if (typeof lastArg === 'function') {
          lastArg(null, result)
          lastArg = _.noop
        }
      })

    return self
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Services can listen for messages using a variety of
// transports. In process and http are included by default.


Seneca()
  .use(approver)
  .<span class="apidocCodeKeywordSpan">listen</span>({type: 'http', port: '8260', pin: 'cmd:*'})

Seneca()
  .use(rejector)
  .listen(8270)


// Load order is important, messages can be routed
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.use" id="apidoc.module.seneca.use">module seneca.use</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.use.use" id="apidoc.element.seneca.use.use">
        function <span class="apidocSignatureSpan">seneca.</span>use
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function top_use() {
  var argsarr = new Array(arguments.length)
  for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

  var instance = module.exports()

  return instance.use.apply(instance, argsarr)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


// Services can listen for messages using a variety of
// transports. In process and http are included by default.


Seneca()
.<span class="apidocCodeKeywordSpan">use</span>(approver)
.listen({type: 'http', port: '8260', pin: 'cmd:*'})

Seneca()
.use(rejector)
.listen(8270)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.util" id="apidoc.module.seneca.util">module seneca.util</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.util.argprops" id="apidoc.element.seneca.util.argprops">
        function <span class="apidocSignatureSpan">seneca.util.</span>argprops
        <span class="apidocSignatureSpan">(defaults, args, fixed, omits)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function argprops(defaults, args, fixed, omits) {
  omits = _.isArray(omits) ? omits
    : _.isObject(omits) ? _.keys(omits)
    : _.isString(omits) ? omits.split(/\s*,\s*/)
    : '' + omits

  // a little pre omit to avoid entities named in omits
  var usedargs = _.omit(args, omits)

  // don't support $ args
  usedargs = clean(usedargs)

  return _.omit(deepextend(defaults, usedargs, fixed), omits)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.clean" id="apidoc.element.seneca.util.clean">
        function <span class="apidocSignatureSpan">seneca.util.</span>clean
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clean(obj) {
  if (obj === null) return obj

  return _.pickBy(obj, function (val, prop) {
    return !_.includes(prop, '$')
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // See [`seneca.add`](#seneca.add)
  function api_add () {
var self = this
var args = Common.parsePattern(self, arguments, 'action:f? actmeta:o?')

var raw_pattern = args.pattern

var pattern = self.util.<span class="apidocCodeKeywordSpan">clean</span>(raw_pattern)

if (!_.keys(pattern)) {
  throw error('add_empty_pattern', {args: Common.clean(args)})
}


var action = args.action || function default_action (msg, done) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.copydata" id="apidoc.element.seneca.util.copydata">
        function <span class="apidocSignatureSpan">seneca.util.</span>copydata
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">copydata = function (obj) {
  var copy

  // Handle the 3 simple types, and null or undefined
  if (obj === null || typeof obj !== 'object') return obj

  // Handle Date
  if (_.isDate(obj)) {
    copy = new Date()
    copy.setTime(obj.getTime())
    return copy
  }

  // Handle Array
  if (_.isArray(obj)) {
    copy = []
    for (var i = 0, len = obj.length; i &lt; len; ++i) {
      copy[i] = copydata(obj[i])
    }
    return copy
  }

  // Handle Object
  if (_.isObject(obj)) {
    copy = {}
    for (var attr in obj) {
      if (obj.hasOwnProperty(attr)) copy[attr] = copydata(obj[attr])
    }
    return copy
  }

  throw new Error("Unable to copy obj! Its type isn't supported.")
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function action_options_get (args, done) {
  var options = private$.optioner.get()

  var base = args.base || null
  var root = base ? (options[base] || {}) : options
  var val = args.key ? root[args.key] : root

  done(null, Common.<span class="apidocCodeKeywordSpan">copydata</span>(val))
}

_.each(so.internal.close_signals, function (active, signal) {
  if (active) {
    process.once(signal, handleClose)
  }
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.deepextend" id="apidoc.element.seneca.util.deepextend">
        function <span class="apidocSignatureSpan">seneca.util.</span>deepextend
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deepextend() {
  var argsarr = new Array(arguments.length)
  for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

  // Lodash uses the reverse order to apply defaults than the deepextend API.
  argsarr = argsarr.reverse()

  // Add an empty object to the front of the args.  Defaults will be written
  // to this empty object.
  argsarr.unshift({})

  return _.defaultsDeep.apply(_, argsarr)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  callpoint: callpoint
})

root.util = seneca_util


// Configure logging
private$.exports = { options: Common.<span class="apidocCodeKeywordSpan">deepextend</span>({}, so) }
private$.decorations = {}

private$.logger = load_logger(root, so.internal.logger)
root.log = make_log(root, default_log_modifier)


// Error events are fatal, unless you're undead.  These are not the
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.nil" id="apidoc.element.seneca.util.nil">
        function <span class="apidocSignatureSpan">seneca.util.</span>nil
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function nil() {
  _.each(arguments, function (arg) {
    if (_.isFunction(arg)) {
      return arg()
    }
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.parsepattern" id="apidoc.element.seneca.util.parsepattern">
        function <span class="apidocSignatureSpan">seneca.util.</span>parsepattern
        <span class="apidocSignatureSpan">(instance, args, normaspec, fixed)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse_pattern(instance, args, normaspec, fixed) {
  args =
    Norma('{strargs:s? objargs:o? moreobjargs:o? ' + (normaspec || '') + '}', args)

  try {
    return _.extend(
      args,
      { pattern: _.extend(
          {},

          // Precedence of arguments in add,act is left-to-right
          args.moreobjargs ? args.moreobjargs : {},
          args.objargs ? args.objargs : {},
          args.strargs ? Jsonic(args.strargs) : {},

          fixed || {})
      })
  }
  catch (e) {
    var col = (e.line === 1) ? e.column - 1 : e.column
    throw internals.error('add_string_pattern_syntax', {
      argstr: args,
      syntax: e.message,
      line: e.line,
      col: col
    })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.pattern" id="apidoc.element.seneca.util.pattern">
        function <span class="apidocSignatureSpan">seneca.util.</span>pattern
        <span class="apidocSignatureSpan">(patobj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pattern(patobj) {
  if (_.isString(patobj)) {
    return patobj
  }

  patobj = patobj || {}
  var sb = []
  _.each(patobj, function (v, k) {
    if (!~k.indexOf('$') &amp;&amp; !_.isFunction(v)) {
      sb.push(k + ':' + v)
    }
  })

  sb.sort()

  return sb.join(',')
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      handle_sub(args, result)
    }
  }

  var subs = private$.subrouter.find(pattern)
  if (!subs) {
    private$.subrouter.add(pattern, subs = [])
    subs.pattern = Common.<span class="apidocCodeKeywordSpan">pattern</span>(pattern)
  }
  subs.push(subargs.action)

  return self
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.pincanon" id="apidoc.element.seneca.util.pincanon">
        function <span class="apidocSignatureSpan">seneca.util.</span>pincanon
        <span class="apidocSignatureSpan">(inpin)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pincanon(inpin) {
  if (_.isString(inpin)) {
    return pattern(Jsonic(inpin))
  }
  else if (_.isArray(inpin)) {
    var pin = _.map(inpin, pincanon)
    pin.sort()
    return pin.join(';')
  }
  else {
    return pattern(inpin)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
})

var opts = self.options(null).transport || {}

var raw_config = internals.parse_config(argsarr)

// pg: pin group
raw_config.pg = Common.<span class="apidocCodeKeywordSpan">pincanon</span>(raw_config.pin || raw_config.pins)

var config = internals.resolveConfig(raw_config, opts)

config.id = config.id || Common.pattern(raw_config)

var pins = config.pins ||
      (_.isArray(config.pin) ? config.pin : [config.pin || ''])
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.print" id="apidoc.element.seneca.util.print">
        function <span class="apidocSignatureSpan">seneca.util.</span>print
        <span class="apidocSignatureSpan">(err, out)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function print(err, out) {
  if (err) { console.log('ERROR: ' + err.message) }
  else { console.log(Util.inspect(out, {depth: null})) }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.recurse" id="apidoc.element.seneca.util.recurse">
        function <span class="apidocSignatureSpan">seneca.util.</span>recurse
        <span class="apidocSignatureSpan">(list, work, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function recurse(list, work, done) {
  var ctxt = this

  if (_.isNumber(list)) {
    list = _.range(0, list)
  }
  else {
    list = _.clone(list)
  }

  function next (err, out) {
    if (err) return done(err, out)

    var item = list.shift()

    if (void 0 !== item) {
      work.call(ctxt, item, next)
    }
    else {
      done.call(ctxt, err, out)
    }
  }
  next.call(ctxt)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.seneca.util.router" id="apidoc.element.seneca.util.router">
        function <span class="apidocSignatureSpan">seneca.util.</span>router
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function router() { return Patrun() }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.util.argprops" id="apidoc.module.seneca.util.argprops">module seneca.util.argprops</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.util.argprops.argprops" id="apidoc.element.seneca.util.argprops.argprops">
        function <span class="apidocSignatureSpan">seneca.util.</span>argprops
        <span class="apidocSignatureSpan">(defaults, args, fixed, omits)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function argprops(defaults, args, fixed, omits) {
  omits = _.isArray(omits) ? omits
    : _.isObject(omits) ? _.keys(omits)
    : _.isString(omits) ? omits.split(/\s*,\s*/)
    : '' + omits

  // a little pre omit to avoid entities named in omits
  var usedargs = _.omit(args, omits)

  // don't support $ args
  usedargs = clean(usedargs)

  return _.omit(deepextend(defaults, usedargs, fixed), omits)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.util.clean" id="apidoc.module.seneca.util.clean">module seneca.util.clean</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.util.clean.clean" id="apidoc.element.seneca.util.clean.clean">
        function <span class="apidocSignatureSpan">seneca.util.</span>clean
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clean(obj) {
  if (obj === null) return obj

  return _.pickBy(obj, function (val, prop) {
    return !_.includes(prop, '$')
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // See [`seneca.add`](#seneca.add)
  function api_add () {
var self = this
var args = Common.parsePattern(self, arguments, 'action:f? actmeta:o?')

var raw_pattern = args.pattern

var pattern = self.util.<span class="apidocCodeKeywordSpan">clean</span>(raw_pattern)

if (!_.keys(pattern)) {
  throw error('add_empty_pattern', {args: Common.clean(args)})
}


var action = args.action || function default_action (msg, done) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.util.copydata" id="apidoc.module.seneca.util.copydata">module seneca.util.copydata</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.util.copydata.copydata" id="apidoc.element.seneca.util.copydata.copydata">
        function <span class="apidocSignatureSpan">seneca.util.</span>copydata
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">copydata = function (obj) {
  var copy

  // Handle the 3 simple types, and null or undefined
  if (obj === null || typeof obj !== 'object') return obj

  // Handle Date
  if (_.isDate(obj)) {
    copy = new Date()
    copy.setTime(obj.getTime())
    return copy
  }

  // Handle Array
  if (_.isArray(obj)) {
    copy = []
    for (var i = 0, len = obj.length; i &lt; len; ++i) {
      copy[i] = copydata(obj[i])
    }
    return copy
  }

  // Handle Object
  if (_.isObject(obj)) {
    copy = {}
    for (var attr in obj) {
      if (obj.hasOwnProperty(attr)) copy[attr] = copydata(obj[attr])
    }
    return copy
  }

  throw new Error("Unable to copy obj! Its type isn't supported.")
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function action_options_get (args, done) {
  var options = private$.optioner.get()

  var base = args.base || null
  var root = base ? (options[base] || {}) : options
  var val = args.key ? root[args.key] : root

  done(null, Common.<span class="apidocCodeKeywordSpan">copydata</span>(val))
}

_.each(so.internal.close_signals, function (active, signal) {
  if (active) {
    process.once(signal, handleClose)
  }
})
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.util.deepextend" id="apidoc.module.seneca.util.deepextend">module seneca.util.deepextend</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.util.deepextend.deepextend" id="apidoc.element.seneca.util.deepextend.deepextend">
        function <span class="apidocSignatureSpan">seneca.util.</span>deepextend
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deepextend() {
  var argsarr = new Array(arguments.length)
  for (var l = 0; l &lt; argsarr.length; ++l) { argsarr[l] = arguments[l] }

  // Lodash uses the reverse order to apply defaults than the deepextend API.
  argsarr = argsarr.reverse()

  // Add an empty object to the front of the args.  Defaults will be written
  // to this empty object.
  argsarr.unshift({})

  return _.defaultsDeep.apply(_, argsarr)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  callpoint: callpoint
})

root.util = seneca_util


// Configure logging
private$.exports = { options: Common.<span class="apidocCodeKeywordSpan">deepextend</span>({}, so) }
private$.decorations = {}

private$.logger = load_logger(root, so.internal.logger)
root.log = make_log(root, default_log_modifier)


// Error events are fatal, unless you're undead.  These are not the
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.util.nil" id="apidoc.module.seneca.util.nil">module seneca.util.nil</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.util.nil.nil" id="apidoc.element.seneca.util.nil.nil">
        function <span class="apidocSignatureSpan">seneca.util.</span>nil
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function nil() {
  _.each(arguments, function (arg) {
    if (_.isFunction(arg)) {
      return arg()
    }
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.util.parsepattern" id="apidoc.module.seneca.util.parsepattern">module seneca.util.parsepattern</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.util.parsepattern.parsepattern" id="apidoc.element.seneca.util.parsepattern.parsepattern">
        function <span class="apidocSignatureSpan">seneca.util.</span>parsepattern
        <span class="apidocSignatureSpan">(instance, args, normaspec, fixed)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse_pattern(instance, args, normaspec, fixed) {
  args =
    Norma('{strargs:s? objargs:o? moreobjargs:o? ' + (normaspec || '') + '}', args)

  try {
    return _.extend(
      args,
      { pattern: _.extend(
          {},

          // Precedence of arguments in add,act is left-to-right
          args.moreobjargs ? args.moreobjargs : {},
          args.objargs ? args.objargs : {},
          args.strargs ? Jsonic(args.strargs) : {},

          fixed || {})
      })
  }
  catch (e) {
    var col = (e.line === 1) ? e.column - 1 : e.column
    throw internals.error('add_string_pattern_syntax', {
      argstr: args,
      syntax: e.message,
      line: e.line,
      col: col
    })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.util.pattern" id="apidoc.module.seneca.util.pattern">module seneca.util.pattern</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.util.pattern.pattern" id="apidoc.element.seneca.util.pattern.pattern">
        function <span class="apidocSignatureSpan">seneca.util.</span>pattern
        <span class="apidocSignatureSpan">(patobj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pattern(patobj) {
  if (_.isString(patobj)) {
    return patobj
  }

  patobj = patobj || {}
  var sb = []
  _.each(patobj, function (v, k) {
    if (!~k.indexOf('$') &amp;&amp; !_.isFunction(v)) {
      sb.push(k + ':' + v)
    }
  })

  sb.sort()

  return sb.join(',')
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      handle_sub(args, result)
    }
  }

  var subs = private$.subrouter.find(pattern)
  if (!subs) {
    private$.subrouter.add(pattern, subs = [])
    subs.pattern = Common.<span class="apidocCodeKeywordSpan">pattern</span>(pattern)
  }
  subs.push(subargs.action)

  return self
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.util.pincanon" id="apidoc.module.seneca.util.pincanon">module seneca.util.pincanon</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.util.pincanon.pincanon" id="apidoc.element.seneca.util.pincanon.pincanon">
        function <span class="apidocSignatureSpan">seneca.util.</span>pincanon
        <span class="apidocSignatureSpan">(inpin)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pincanon(inpin) {
  if (_.isString(inpin)) {
    return pattern(Jsonic(inpin))
  }
  else if (_.isArray(inpin)) {
    var pin = _.map(inpin, pincanon)
    pin.sort()
    return pin.join(';')
  }
  else {
    return pattern(inpin)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
})

var opts = self.options(null).transport || {}

var raw_config = internals.parse_config(argsarr)

// pg: pin group
raw_config.pg = Common.<span class="apidocCodeKeywordSpan">pincanon</span>(raw_config.pin || raw_config.pins)

var config = internals.resolveConfig(raw_config, opts)

config.id = config.id || Common.pattern(raw_config)

var pins = config.pins ||
      (_.isArray(config.pin) ? config.pin : [config.pin || ''])
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.util.print" id="apidoc.module.seneca.util.print">module seneca.util.print</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.util.print.print" id="apidoc.element.seneca.util.print.print">
        function <span class="apidocSignatureSpan">seneca.util.</span>print
        <span class="apidocSignatureSpan">(err, out)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function print(err, out) {
  if (err) { console.log('ERROR: ' + err.message) }
  else { console.log(Util.inspect(out, {depth: null})) }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.util.recurse" id="apidoc.module.seneca.util.recurse">module seneca.util.recurse</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.util.recurse.recurse" id="apidoc.element.seneca.util.recurse.recurse">
        function <span class="apidocSignatureSpan">seneca.util.</span>recurse
        <span class="apidocSignatureSpan">(list, work, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function recurse(list, work, done) {
  var ctxt = this

  if (_.isNumber(list)) {
    list = _.range(0, list)
  }
  else {
    list = _.clone(list)
  }

  function next (err, out) {
    if (err) return done(err, out)

    var item = list.shift()

    if (void 0 !== item) {
      work.call(ctxt, item, next)
    }
    else {
      done.call(ctxt, err, out)
    }
  }
  next.call(ctxt)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.seneca.util.router" id="apidoc.module.seneca.util.router">module seneca.util.router</a></h1>


    <h2>
        <a href="#apidoc.element.seneca.util.router.router" id="apidoc.element.seneca.util.router.router">
        function <span class="apidocSignatureSpan">seneca.util.</span>router
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function router() { return Patrun() }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>